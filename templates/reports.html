<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepLeuko | Case Reports</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style1.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    
</head>
<body class="dashboard-body">

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-brand">
            <h2 class="logo-text" style="color: var(--accent-green); padding: 25px 20px; margin: 0;">DeepLeuko</h2>
        </div>
        <nav class="sidebar-nav">
            <ul style="list-style: none; padding: 0;">
                <li><a href="/dashboard" style="color: #94a3b8; text-decoration: none; padding: 15px 20px; display: block;"><i class="fas fa-th-large"></i> Dashboard</a></li>
                <li><a href="/analysis" style="color: #94a3b8; text-decoration: none; padding: 15px 20px; display: block;"><i class="fas fa-microscope"></i> Disease Analysis</a></li>
                <li class="active" style="background: var(--primary-emerald);"><a href="/reports" style="color: white; text-decoration: none; padding: 15px 20px; display: block;"><i class="fas fa-file-medical"></i> Case Reports</a></li>
                
            </ul>
        </nav>
    </aside>

    <div class="main-wrapper" id="mainWrapper">
        <header class="top-nav" style="background: var(--primary-emerald); color: white; display: flex; justify-content: space-between; align-items: center; padding: 0 25px; height: 65px;">
            <div class="nav-left">
                <i class="fas fa-bars toggle-icon" id="menuToggle" style="cursor: pointer; font-size: 1.4rem;"></i>
                <span style="font-weight: bold; font-size: 1.2rem; margin-left: 15px;">DeepLeuko</span>
            </div>
            <div class="nav-right" style="display: flex; gap: 20px; align-items: center;">
                <span>Welcome, {{ username }}</span>
                <a href="/logout" style="color: white; border: 1px solid rgba(255,255,255,0.5); padding: 5px 12px; border-radius: 6px; text-decoration: none; font-size: 0.85rem;">Logout</a>
            </div>
        </header>

        <main class="content-body" style="padding: 40px;">
            <div class="page-title-section">
                <h2 style="font-size: 1.8rem; color: var(--dark-slate); margin: 0;"><i class="fas fa-file-medical"></i> Case Reports</h2>
                <p style="color: #64748b; margin: 5px 0 0 0;">Manage and export medical documentation.</p>
            </div>

            <div class="report-container">
                <div class="table-controls">
                    <div class="search-box">
                        <i class="fas fa-search" style="color: #94a3b8;"></i>
                        <input type="text" placeholder="Search by Case ID...">
                    </div>
                </div>

                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Case ID</th>
                            <th>Date</th>
                            <th>Diagnosis</th>
                            <th>Confidence</th>
                            <th>Pathologist</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="reportTableBody">
                        {% for r in reports %}
                         <tr>
                            <td>#DL-{{ r.id }}</td>
                            <td>{{ r.created_at.strftime('%Y-%m-%d') }}</td>
                            <td>
                             <span class="badge badge-aml">{{ r.prediction }}</span>
                            </td>
                            <td>{{ r.confidence }}%</td>
                            <td>{{ username }}</td>
                            <td>
                                <button class="btn-download" onclick="downloadPDF({{ r.id }})">
                                    <i class="fas fa-file-pdf"></i> PDF
                                </button>
                            </td>
                            </tr>
                        {% endfor %}
                        </tbody>

                </table>
            </div>
        </main>
    </div>

   <script src="{{ url_for('static', filename='js/reports.js') }}"></script>

</body>
</html>